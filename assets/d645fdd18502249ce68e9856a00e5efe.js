
var Console;Console=(function(){var output,_cmdLine,_container,_element,_history,_histpos,_histtemp;_history=null;_histpos=0;_histtemp=0;_element=null;_container=null;_cmdLine=null;output=function(html){_element.append(html);return _cmdLine.get(0).scrollIntoView();};function Console($id){_history=[];_container=$($id);_container.append("<output></output>\n<div id=\"input-line\" class=\"input-line\">\n<div class=\"prompt\">$&gt;</div><div><input class=\"cmdline\" autofocus /></div>\n</div>");_cmdLine=_container.find('#input-line .cmdline');_element=_container.find('output');_element.on('click',function(e){var el;el=e.target;if(el.classList.contains('file')||el.classList.contains('folder')){return _cmdLine.value+=' '+el.textContent;}});$(window).on('click',function(e){return _cmdLine.focus();});$('body').on('keydown',function(e){if(e.keyCode===27){e.stopPropagation();return e.preventDefault();}});_cmdLine.on('click',function(e){return this.value=this.value;});_cmdLine.on('keydown',function(e){if((e.ctrlKey||e.metaKey)&&e.keyCode===83){_container.toggleClass('flicker');output('<div>Screen flicker: '+(_container.hasClass('flicker')?'on':'off')+'</div>');e.preventDefault();return e.stopPropagation();}});_cmdLine.on('keyup',function(e){if(_history.length){if(e.keyCode===38||e.keyCode===40){if(_history[_histpos]){_history[_histpos]=this.value;}else{_histtemp=this.value;}}if(e.keyCode===38){_histpos--;if(_histpos<0){_histpos=0;}}else if(e.keyCode===40){_histpos++;if(_histpos>_history.length){_histpos=_history.length;}}if(e.keyCode===38||e.keyCode===40){this.value=_history[_histpos]?_history[_histpos]:_histtemp;return this.value=this.value;}}});_cmdLine.on('keydown',function(e){var args,cmd,input,line;if(!this.value&&e.keyCode===8){return;}if(e.keyCode===9){return e.preventDefault;}else if(e.keyCode===13){if(this.value){_history[_history.length]=this.value;_histpos=_history.length;}line=this.parentNode.parentNode.cloneNode(true);line.removeAttribute('id');line.classList.add('line');input=line.querySelector('input.cmdline');input.autofocus=false;input.readOnly=true;_element.append(line);if(this.value&&this.value.trim()){args=this.value.split(' ').filter(function(val,i){return val;});cmd=args[0].toLowerCase();args=args.splice(1);}output(cmd);return this.value='';}});}Console.prototype.clear=function($input){_element.html('');return $input.value='';};Console.prototype.init=function($str){return output('<div>Welcome to '+document.title+'</div>');};return Console;})();
$(function(){var _con;_con=new Console("#container");return _con.init();});