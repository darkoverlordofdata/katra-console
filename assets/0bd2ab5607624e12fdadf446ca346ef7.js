
var Console;Console=(function(){var cmdLine,container,element,history,historyHandler,histpos,histtemp,inputTextClick,keyboardShortcutHandler,output,processNewCommand;history=null;histpos=0;histtemp=0;element=null;container=null;cmdLine=null;output=function(html){element.insertAdjacentHTML('beforeEnd',html);return cmdLine.scrollIntoView();};inputTextClick=function(e){return this.value=this.value;};keyboardShortcutHandler=function(e){if((e.ctrlKey||e.metaKey)&&e.keyCode===83){container.classList.toggle('flicker');output('<div>Screen flicker: '+(container.classList.contains('flicker')?'on':'off')+'</div>');e.preventDefault();return e.stopPropagation();}};historyHandler=function(e){if(history.length){if(e.keyCode===38||e.keyCode===40){if(history[histpos]){history[histpos]=this.value;}else{histtemp=this.value;}}if(e.keyCode===38){histpos--;if(histpos<0){histpos=0;}}else if(e.keyCode===40){histpos++;if(histpos>history.length){histpos=history.length;}}if(e.keyCode===38||e.keyCode===40){this.value=history[histpos]?history[histpos]:histtemp;return this.value=this.value;}}};processNewCommand=function(e){var args,cmd,input,line;if(!this.value&&e.keyCode===8){return;}if(e.keyCode===9){return e.preventDefault();}else if(e.keyCode===13){if(this.value){history[history.length]=this.value;histpos=history.length;}line=this.parentNode.parentNode.cloneNode(true);line.removeAttribute('id');line.classList.add('line');input=line.querySelector('input.cmdline');input.autofocus=false;input.readOnly=true;element.appendChild(line);if(this.value&&this.value.trim()){args=this.value.split(' ').filter(function(val,i){return val;});cmd=args[0].toLowerCase();args=args.splice(1);}output(cmd);return this.value='';}};function Console($id){history=[];container=document.getElementById($id);container.insertAdjacentHTML('beforeEnd',"<output></output>\n<div id=\"input-line\" class=\"input-line\">\n<div class=\"prompt\">$&gt;</div><div><input class=\"cmdline\" autofocus /></div>\n</div>");cmdLine=container.querySelector('#input-line .cmdline');element=container.querySelector('output');element.addEventListener('click',function(e){var el;el=e.target;if(el.classList.contains('file')||el.classList.contains('folder')){return cmdLine.value+=' '+el.textContent;}},false);window.addEventListener('click',function(e){return cmdLine.focus();},false);cmdLine.addEventListener('click',inputTextClick,false);cmdLine.addEventListener('keydown',keyboardShortcutHandler,false);cmdLine.addEventListener('keyup',historyHandler,false);cmdLine.addEventListener('keydown',processNewCommand,false);}Console.prototype.clear=function(input){element.innerHTML='';input.value='';return document.documentElement.style.height='100%';};Console.prototype.init=function(){return output('<div>Welcome to '+document.title);};return Console;})();
var toggleHelp,_con;_con=new Console("container");_con.init();toggleHelp=function(){document.querySelector(".help").classList.toggle("hidden");return document.body.classList.toggle("dim");};document.body.addEventListener("keydown",function(e){if(e.keyCode===27){toggleHelp();e.stopPropagation();return e.preventDefault();}},false);